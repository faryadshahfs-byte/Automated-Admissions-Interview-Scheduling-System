<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Proven Solutions - Student Case Form</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f5f7fa;
        margin: 0;
        padding: 0;
    }

    .container {
        width: 100%;
        max-width: 620px;
        margin: 40px auto;
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 0 15px rgba(0,0,0,0.1);
        position: relative;
    }

    .case-number {
        position: absolute;
        top: 20px;
        right: 25px;
        font-weight: bold;
        font-size: 18px;
        color: #0078ff;
    }

    h2 {
        text-align: center;
        color: #0078ff;
        margin-bottom: 25px;
    }

    label {
        display: block;
        margin-top: 12px;
        font-weight: bold;
        color: #333;
    }

    input, select, textarea {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #bbb;
        border-radius: 6px;
        font-size: 15px;
        box-sizing: border-box;
    }

    button {
        width: 100%;
        background: #0078ff;
        color: white;
        padding: 14px;
        border: none;
        border-radius: 8px;
        margin-top: 20px;
        font-size: 18px;
        cursor: pointer;
    }

    button:hover {
        background: #005fcc;
    }
</style>

<script>
// Generate smart timestamp-based case number
function generateCaseNumber() {
    const now = Date.now().toString();
    const last4 = now.slice(-4);
    return last4;
}

window.onload = function () {
    const caseNum = generateCaseNumber();
    document.getElementById("caseNumber").value = caseNum;
    document.getElementById("caseNumberDisplay").innerText = caseNum;
};
</script>

</head>
<body>

<div class="container">

    <div class="case-number">
        Case Number: <span id="caseNumberDisplay"></span>
    </div>

    <h2>Student Application Form</h2>

    <form id="studentForm" method="POST" action="https://quizdose.app.n8n.cloud/webhook/student-case-form">

        <input type="hidden" id="caseNumber" name="caseNumber" />

        <label>Full Name</label>
        <input type="text" name="fullName" required />

        <label>Email</label>
        <input type="email" name="email" required />

        <label>Phone</label>
        <input type="text" name="phone" required />

        <label>Date of Birth</label>
        <input type="date" name="dob" required />

        <label>Gender</label>
        <select name="gender" required>
            <option value="">Select Gender</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
        </select>

        <label>Program Applying For</label>
        <select name="program" required>
            <option value="">Select Program</option>
            <option>Computer Engineering</option>
            <option>Civil Engineering</option>
            <option>Software Engineering</option>
            <option>Mechanical Engineering</option>
            <option>Electrical Engineering</option>
            <option>Biotechnology</option>
            <option>Physics</option>
            <option>Chemistry</option>
            <option>Mathematics</option>
        </select>

        <label>Highest Qualification</label>
        <select name="qualification" required>
            <option value="">Select Qualification</option>
            <option>Matric</option>
            <option>Intermediate / A-Level</option>
            <option>Diploma</option>
            <option>Bachelor's Degree</option>
            <option>Master's Degree</option>
        </select>

        <label>Address</label>
        <textarea name="address" rows="3" required></textarea>

        <label>City</label>
        <select name="city" required>
            <option value="">Select City</option>
            <option>Karachi</option>
            <option>Lahore</option>
            <option>Islamabad</option>
            <option>Rawalpindi</option>
            <option>Peshawar</option>
            <option>Quetta</option>
        </select>

        <label>Country</label>
        <select name="country" required>
            <option value="">Select Country</option>
            <option>Pakistan</option>
            <option>UAE</option>
            <option>Saudi Arabia</option>
            <option>Qatar</option>
            <option>Canada</option>
            <option>UK</option>
        </select>

        <button type="submit">Submit Application</button>
    </form>

</div>

<!-- Success Popup -->
<div id="successPopup" 
     style="display:none; position:fixed; top:20px; right:20px; 
            background:#4CAF50; color:white; padding:15px 25px; 
            border-radius:8px; font-size:18px; 
            box-shadow:0 0 10px rgba(0,0,0,0.3); 
            z-index:9999;">
    âœ“ Application Submitted Successfully!
</div>

<script>
document.getElementById("studentForm").addEventListener("submit", async function(e) {
    e.preventDefault(); // stop page reload

    const form = e.target;
    const formData = new FormData(form);

    // Send data to n8n webhook
    await fetch(form.action, {
        method: "POST",
        body: formData
    });

    // Show popup
    const popup = document.getElementById("successPopup");
    popup.style.display = "block";

    // Hide popup after 3 seconds
    setTimeout(() => {
        popup.style.display = "none";
    }, 3000);

    // Reset the form
    form.reset();
});
</script>

</body>
</html>